cmake_minimum_required(VERSION 3.16)
project(GraphSimEnv LANGUAGES CXX)

# C++ standard
set(CMAKE_CXX_STANDARD 20)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

# Compiler flags
if (CMAKE_CXX_COMPILER_ID MATCHES "GNU|Clang")
    add_compile_options(-Wall -Wextra -Wpedantic -O2)
elseif (MSVC)
    add_compile_options(/W4)
endif()

# H채mta pybind11
add_subdirectory(externals/pybind11)

# Samla alla C++-filer
file(GLOB SRC_FILES
    "${CMAKE_SOURCE_DIR}/src/*.cpp"
)

# Best채m vilken fil som exponerar modulen till Python
set(BINDING_SRC "${CMAKE_SOURCE_DIR}/src/exposeToPy.cpp")

# Skapa Python-modulen
pybind11_add_module(warehouse_env
    ${BINDING_SRC}
    ${SRC_FILES}
)

# Inkludera headers
target_include_directories(warehouse_env PRIVATE 
    ${CMAKE_SOURCE_DIR}/includes
)

# L채nka r채tt pybind11-bibliotek
target_link_libraries(warehouse_env PRIVATE pybind11::module)
